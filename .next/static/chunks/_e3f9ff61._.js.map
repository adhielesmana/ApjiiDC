{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/store/auth/authSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { User, AuthState } from \"@/types/auth\";\n\nconst initialState: AuthState = {\n  user: null,\n  token: null,\n  loading: true, // Make sure this is true initially\n  error: null,\n};\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    setCredentials: (\n      state,\n      action: PayloadAction<{ token: string; user: User }>\n    ) => {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.loading = false;\n      state.error = null;\n    },\n    setLoading: (state, action: PayloadAction<boolean>) => {\n      state.loading = action.payload;\n    },\n    setError: (state, action: PayloadAction<string>) => {\n      state.error = action.payload;\n      state.loading = false;\n    },    logout: (state) => {\n      state.user = null;\n      state.token = null;\n      state.loading = false;\n      state.error = null;\n      // Clear local storage data\n      if (typeof window !== 'undefined') {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        sessionStorage.removeItem('token');\n        sessionStorage.removeItem('user');\n      }\n      // Ensure any other auth state is cleared\n      // If you have other properties in the auth state, reset them here\n    },\n    restoreState: (state, action: PayloadAction<AuthState>) => {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.loading = action.payload.loading;\n      state.error = action.payload.error;\n    },\n  },\n});\n\nexport const { setCredentials, setLoading, setError, logout, restoreState } =\n  authSlice.actions;\nexport default authSlice.reducer;\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAGA,MAAM,eAA0B;IAC9B,MAAM;IACN,OAAO;IACP,SAAS;IACT,OAAO;AACT;AAEA,MAAM,YAAY,IAAA,6MAAW,EAAC;IAC5B,MAAM;IACN;IACA,UAAU;QACR,gBAAgB,CACd,OACA;YAEA,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,OAAO,GAAG;YAChB,MAAM,KAAK,GAAG;QAChB;QACA,YAAY,CAAC,OAAO;YAClB,MAAM,OAAO,GAAG,OAAO,OAAO;QAChC;QACA,UAAU,CAAC,OAAO;YAChB,MAAM,KAAK,GAAG,OAAO,OAAO;YAC5B,MAAM,OAAO,GAAG;QAClB;QAAM,QAAQ,CAAC;YACb,MAAM,IAAI,GAAG;YACb,MAAM,KAAK,GAAG;YACd,MAAM,OAAO,GAAG;YAChB,MAAM,KAAK,GAAG;YACd,2BAA2B;YAC3B,wCAAmC;gBACjC,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;gBACxB,eAAe,UAAU,CAAC;gBAC1B,eAAe,UAAU,CAAC;YAC5B;QACA,yCAAyC;QACzC,kEAAkE;QACpE;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,OAAO,GAAG,OAAO,OAAO,CAAC,OAAO;YACtC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;QACpC;IACF;AACF;AAEO,MAAM,EAAE,cAAc,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,GACzE,UAAU,OAAO;uCACJ,UAAU,OAAO","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/store/catalog/catalogSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface Provider {\n  _id: string;\n  name: string;\n  contact: {\n    email: string;\n    phone: string;\n  };\n  description: string;\n  address: string;\n}\n\ninterface Space {\n  _id: string;\n  name: string;\n  description: string;\n  price: number;\n  size: string;\n  images: string[];\n  provider: Provider;\n  _addedBy: string;\n  imagesUrl: string[];\n}\n\ninterface CatalogState {\n  spaces: Space[];\n  providers: Provider[];\n  selectedSpace: Space | null;\n  selectedProvider: Provider | null;\n  loading: boolean;\n}\n\nconst initialState: CatalogState = {\n  spaces: [],\n  providers: [],\n  selectedSpace: null,\n  selectedProvider: null,\n  loading: false,\n};\n\nconst catalogSlice = createSlice({\n  name: \"catalog\",\n  initialState,\n  reducers: {\n    setLoading: (state, action: PayloadAction<boolean>) => {\n      state.loading = action.payload;\n    },\n    setSpaces: (state, action: PayloadAction<Space[]>) => {\n      state.spaces = action.payload;\n    },\n    setProviders: (state, action: PayloadAction<Provider[]>) => {\n      state.providers = action.payload;\n    },\n    setSelectedSpace: (state, action: PayloadAction<Space | null>) => {\n      state.selectedSpace = action.payload;\n    },\n    setSelectedProvider: (state, action: PayloadAction<Provider | null>) => {\n      state.selectedProvider = action.payload;\n    },\n    clearCatalog: (state) => {\n      state.spaces = [];\n      state.providers = [];\n    },\n  },\n});\n\nexport const {\n  setLoading,\n  setSpaces,\n  setProviders,\n  setSelectedSpace,\n  setSelectedProvider,\n  clearCatalog,\n} = catalogSlice.actions;\n\nexport default catalogSlice.reducer;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAiCA,MAAM,eAA6B;IACjC,QAAQ,EAAE;IACV,WAAW,EAAE;IACb,eAAe;IACf,kBAAkB;IAClB,SAAS;AACX;AAEA,MAAM,eAAe,IAAA,6MAAW,EAAC;IAC/B,MAAM;IACN;IACA,UAAU;QACR,YAAY,CAAC,OAAO;YAClB,MAAM,OAAO,GAAG,OAAO,OAAO;QAChC;QACA,WAAW,CAAC,OAAO;YACjB,MAAM,MAAM,GAAG,OAAO,OAAO;QAC/B;QACA,cAAc,CAAC,OAAO;YACpB,MAAM,SAAS,GAAG,OAAO,OAAO;QAClC;QACA,kBAAkB,CAAC,OAAO;YACxB,MAAM,aAAa,GAAG,OAAO,OAAO;QACtC;QACA,qBAAqB,CAAC,OAAO;YAC3B,MAAM,gBAAgB,GAAG,OAAO,OAAO;QACzC;QACA,cAAc,CAAC;YACb,MAAM,MAAM,GAAG,EAAE;YACjB,MAAM,SAAS,GAAG,EAAE;QACtB;IACF;AACF;AAEO,MAAM,EACX,UAAU,EACV,SAAS,EACT,YAAY,EACZ,gBAAgB,EAChB,mBAAmB,EACnB,YAAY,EACb,GAAG,aAAa,OAAO;uCAET,aAAa,OAAO","debugId":null}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/store/store.ts"],"sourcesContent":["import { configureStore } from \"@reduxjs/toolkit\";\nimport authReducer from \"./auth/authSlice\";\nimport catalogReducer from \"./catalog/catalogSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    auth: authReducer,\n    catalog: catalogReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: false,\n    }),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,MAAM,QAAQ,IAAA,gNAAc,EAAC;IAClC,SAAS;QACP,MAAM,+IAAW;QACjB,SAAS,qJAAc;IACzB;IACA,YAAY,CAAC,uBACX,qBAAqB;YACnB,mBAAmB;QACrB;AACJ","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/providers/root-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport dynamic from \"next/dynamic\";\nimport { Provider as ReduxProvider } from \"react-redux\";\nimport { store } from \"@/lib/store/store\";\nimport { useEffect } from \"react\";\nimport { setCredentials, logout } from \"@/lib/store/auth/authSlice\";\nimport { ToastProvider } from \"@heroui/toast\";\nimport axios from \"axios\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport Cookies from \"js-cookie\";\nimport { useDispatch } from \"react-redux\";\n\n// ThemeProvider hanya dijalankan di client\nconst ThemeProvider = dynamic(\n  () => import(\"next-themes\").then((mod) => mod.ThemeProvider),\n  { ssr: false }\n);\n\nfunction AuthInitializer() {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  // Tentukan halaman mana yang memerlukan otentikasi\n  const requiresAuth =\n    pathname?.startsWith(\"/admin\") ||\n    pathname?.startsWith(\"/provider\") ||\n    pathname?.startsWith(\"/customer/orders\") ||\n    pathname === \"/customer/become-provider\";\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        const response = await axios.get(\"/api/auth/check\");\n        const { authenticated, token, user } = response.data;\n\n        if (authenticated && token && user) {\n          dispatch(setCredentials({ token, user }));\n        } else {\n          // Clear client-side cookies and Redux state\n          Cookies.remove(\"token\", { path: \"/\" });\n          Cookies.remove(\"user\", { path: \"/\" });\n          dispatch(logout());\n\n          // Redirect ke login HANYA jika halaman memerlukan otentikasi\n          if (requiresAuth) {\n            router.push(\"/login\");\n          }\n        }\n      } catch (error) {\n        // Clear client-side cookies\n        Cookies.remove(\"token\", { path: \"/\" });\n        Cookies.remove(\"user\", { path: \"/\" });\n\n        // Dispatch logout to clean Redux state and localStorage\n        dispatch(logout());\n\n        // Redirect ke login HANYA jika halaman memerlukan otentikasi\n        if (requiresAuth) {\n          router.push(\"/login\");\n        }\n      }\n    };\n\n    initializeAuth();\n\n    // Pasang interceptor untuk menangani expired token (401)\n    const interceptorId = axios.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        const status = error.response?.status;\n        if (status === 401) {\n          // Hapus cookie\n          Cookies.remove(\"token\", { path: \"/\" });\n          Cookies.remove(\"user\", { path: \"/\" });\n\n          // Dispatch logout to clean Redux state and localStorage\n          dispatch(logout());\n\n          // Redirect ke login HANYA jika halaman memerlukan otentikasi\n          if (requiresAuth) {\n            router.replace(\"/login\");\n          }\n        }\n        return Promise.reject(error);\n      }\n    );\n\n    // Cleanup interceptor saat unmount\n    return () => {\n      axios.interceptors.response.eject(interceptorId);\n    };\n  }, [dispatch, router, pathname, requiresAuth]);\n\n  return null;\n}\n\nexport function RootProvider({ children }: { children: React.ReactNode }) {\n  return (\n    <ReduxProvider store={store}>\n      <ThemeProvider\n        attribute=\"class\"\n        defaultTheme=\"light\"\n        enableSystem={false}\n        forcedTheme=\"light\"\n      >\n        <AuthInitializer />\n        <ToastProvider />\n        {children}\n      </ThemeProvider>\n    </ReduxProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAVA;;;;;;;;;;;AAaA,2CAA2C;AAC3C,MAAM,gBAAgB,IAAA,6KAAO,EAC3B,IAAM,yIAAsB,IAAI,CAAC,CAAC,MAAQ,IAAI,aAAa;;;;;;IACzD,KAAK;;KAFH;AAKN,SAAS;;IACP,MAAM,WAAW,IAAA,2KAAW;IAC5B,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,mDAAmD;IACnD,MAAM,eACJ,CAAA,qBAAA,+BAAA,SAAU,UAAU,CAAC,eACrB,qBAAA,+BAAA,SAAU,UAAU,CAAC,kBACrB,qBAAA,+BAAA,SAAU,UAAU,CAAC,wBACrB,aAAa;IAEf,IAAA,0KAAS;qCAAC;YACR,MAAM;4DAAiB;oBACrB,IAAI;wBACF,MAAM,WAAW,MAAM,mJAAK,CAAC,GAAG,CAAC;wBACjC,MAAM,EAAE,aAAa,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;wBAEpD,IAAI,iBAAiB,SAAS,MAAM;4BAClC,SAAS,IAAA,sJAAc,EAAC;gCAAE;gCAAO;4BAAK;wBACxC,OAAO;4BACL,4CAA4C;4BAC5C,mKAAO,CAAC,MAAM,CAAC,SAAS;gCAAE,MAAM;4BAAI;4BACpC,mKAAO,CAAC,MAAM,CAAC,QAAQ;gCAAE,MAAM;4BAAI;4BACnC,SAAS,IAAA,8IAAM;4BAEf,6DAA6D;4BAC7D,IAAI,cAAc;gCAChB,OAAO,IAAI,CAAC;4BACd;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,4BAA4B;wBAC5B,mKAAO,CAAC,MAAM,CAAC,SAAS;4BAAE,MAAM;wBAAI;wBACpC,mKAAO,CAAC,MAAM,CAAC,QAAQ;4BAAE,MAAM;wBAAI;wBAEnC,wDAAwD;wBACxD,SAAS,IAAA,8IAAM;wBAEf,6DAA6D;wBAC7D,IAAI,cAAc;4BAChB,OAAO,IAAI,CAAC;wBACd;oBACF;gBACF;;YAEA;YAEA,yDAAyD;YACzD,MAAM,gBAAgB,mJAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,GAAG;gEACnD,CAAC,WAAa;;gEACd,CAAC;wBACgB;oBAAf,MAAM,UAAS,kBAAA,MAAM,QAAQ,cAAd,sCAAA,gBAAgB,MAAM;oBACrC,IAAI,WAAW,KAAK;wBAClB,eAAe;wBACf,mKAAO,CAAC,MAAM,CAAC,SAAS;4BAAE,MAAM;wBAAI;wBACpC,mKAAO,CAAC,MAAM,CAAC,QAAQ;4BAAE,MAAM;wBAAI;wBAEnC,wDAAwD;wBACxD,SAAS,IAAA,8IAAM;wBAEf,6DAA6D;wBAC7D,IAAI,cAAc;4BAChB,OAAO,OAAO,CAAC;wBACjB;oBACF;oBACA,OAAO,QAAQ,MAAM,CAAC;gBACxB;;YAGF,mCAAmC;YACnC;6CAAO;oBACL,mJAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC;gBACpC;;QACF;oCAAG;QAAC;QAAU;QAAQ;QAAU;KAAa;IAE7C,OAAO;AACT;GA7ES;;QACU,2KAAW;QACb,kJAAS;QACP,oJAAW;;;MAHrB;AA+EF,SAAS,aAAa,KAA2C;QAA3C,EAAE,QAAQ,EAAiC,GAA3C;IAC3B,qBACE,6LAAC,wKAAa;QAAC,OAAO,iIAAK;kBACzB,cAAA,6LAAC;YACC,WAAU;YACV,cAAa;YACb,cAAc;YACd,aAAY;;8BAEZ,6LAAC;;;;;8BACD,6LAAC,mLAAa;;;;;gBACb;;;;;;;;;;;;AAIT;MAfgB","debugId":null}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/providers.tsx"],"sourcesContent":["// app/providers.tsx\n\"use client\";\n\nimport { ReactNode } from \"react\";\nimport { RootProvider } from \"@/components/providers/root-provider\";\n\ninterface ProvidersProps {\n  children: ReactNode;\n}\n\nexport default function Providers({ children }: ProvidersProps) {\n  return <RootProvider>{children}</RootProvider>;\n}\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;AAIpB;AAHA;;;AASe,SAAS,UAAU,KAA4B;QAA5B,EAAE,QAAQ,EAAkB,GAA5B;IAChC,qBAAO,6LAAC,+JAAY;kBAAE;;;;;;AACxB;KAFwB","debugId":null}}]
}