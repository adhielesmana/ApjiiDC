{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/hooks/useAuthData.ts"],"sourcesContent":["import { useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { RootState } from \"@/lib/store/store\";\nimport { User } from \"@/types/auth\";\n\nexport const useAuthData = () => {\n  const { user, token } = useSelector((state: RootState) => state.auth);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      setLoading(true);\n      try {\n        if (!user || !token) {\n          setLoading(false);\n          return;\n        }\n      } catch (error) {\n        console.error(\"Auth data check error:\", error);\n      }\n      setLoading(false);\n    };\n\n    checkAuth();\n  }, [user, token]);\n\n  const isAdmin = user?.roleType === \"admin\";\n  const isAdminStaff = user?.roleType === \"admin\" && user?.role === \"staff\";\n  const isSuperadmin = user?.roleType === \"admin\" && user?.role === \"admin\";\n  const isProvider = user?.roleType === \"provider\";\n  const isUser = user?.roleType === \"user\";\n\n  return {\n    user,\n    loading,\n    isAdmin,\n    isProvider,\n    isUser,\n    isAdminStaff,\n    isSuperadmin,\n    isAuthenticated: !!user,\n  };\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAIO,MAAM,cAAc;IACzB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAA,wKAAW,EAAC,CAAC,QAAqB,MAAM,IAAI;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,WAAW;YACX,IAAI;gBACF,IAAI,CAAC,QAAQ,CAAC,OAAO;oBACnB,WAAW;oBACX;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;YACA,WAAW;QACb;QAEA;IACF,GAAG;QAAC;QAAM;KAAM;IAEhB,MAAM,UAAU,MAAM,aAAa;IACnC,MAAM,eAAe,MAAM,aAAa,WAAW,MAAM,SAAS;IAClE,MAAM,eAAe,MAAM,aAAa,WAAW,MAAM,SAAS;IAClE,MAAM,aAAa,MAAM,aAAa;IACtC,MAAM,SAAS,MAAM,aAAa;IAElC,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,CAAC,CAAC;IACrB;AACF","debugId":null}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/hooks/useS3Image.ts"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\ninterface UseS3ImageOptions {\n  fallbackUrl?: string;\n  retryAttempts?: number;\n  defaultAvatarName?: string;\n}\n\nexport const useS3Image = (\n  imageKey: string | undefined,\n  options: UseS3ImageOptions = {}\n) => {\n  const { fallbackUrl, retryAttempts = 2, defaultAvatarName } = options;\n\n  // Initial checks for local image types to prevent unnecessary state changes\n  const isLocalImage =\n    imageKey && (imageKey.startsWith(\"blob:\") || imageKey.startsWith(\"data:\"));\n\n  const [imageUrl, setImageUrl] = useState<string>(\n    isLocalImage ? imageKey : \"\"\n  );\n  const [isLoading, setIsLoading] = useState(!isLocalImage);\n  const [error, setError] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n\n  const defaultFallbackUrl = defaultAvatarName\n    ? `https://ui-avatars.com/api/?name=${encodeURIComponent(defaultAvatarName)}`\n    : fallbackUrl;\n  const loadImage = async () => {\n    if (!imageKey) {\n      setImageUrl(defaultFallbackUrl || \"\");\n      setIsLoading(false);\n      return;\n    }\n\n    // If it's a blob URL, just use it directly without verification\n    if (imageKey.startsWith(\"blob:\") || imageKey.startsWith(\"data:\")) {\n      setImageUrl(imageKey);\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setError(false);\n\n      // If it's already a full URL, verify it works\n      if (imageKey.startsWith(\"http\")) {\n        const img = new Image();\n        img.src = imageKey;\n        await new Promise((resolve, reject) => {\n          img.onload = resolve;\n          img.onerror = reject;\n        });\n        setImageUrl(imageKey);\n        setIsLoading(false);\n        return;\n      }\n\n      // Otherwise, fetch from S3\n      const response = await axios.get(\n        `/api/get-s3-image?key=${encodeURIComponent(imageKey)}`\n      );\n\n      if (response.data.status === \"ok\" && response.data.url) {\n        // Verify the URL works\n        try {\n          const img = new Image();\n          img.src = response.data.url;\n          await new Promise((resolve, reject) => {\n            const timeout = setTimeout(() => {\n              reject(new Error(\"Image load timeout\"));\n            }, 10000); // 10 second timeout\n\n            img.onload = () => {\n              clearTimeout(timeout);\n              resolve(true);\n            };\n            img.onerror = (e) => {\n              clearTimeout(timeout);\n              reject(new Error(\"Image load failed\")); // Always reject with Error\n            };\n          });\n          setImageUrl(response.data.url);\n        } catch (verifyError) {\n          console.error(\"Error verifying image URL:\", verifyError);\n          throw new Error(\"Failed to verify image URL\");\n        }\n      } else {\n        throw new Error(\"Invalid response from S3 API\");\n      }\n    } catch (error) {\n      // console.error(\"Error loading S3 image:\", error);\n      setError(true);\n\n      // Retry logic with exponential backoff\n      if (retryCount < retryAttempts) {\n        const backoffTime = Math.min(1000 * Math.pow(2, retryCount), 10000); // Cap at 10 seconds\n        setRetryCount((prev) => prev + 1);\n        setTimeout(() => loadImage(), backoffTime);\n      } else {\n        setImageUrl(defaultFallbackUrl || \"\");\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    // If it's a local image (blob: or data:), skip the loading process\n    if (\n      imageKey &&\n      (imageKey.startsWith(\"blob:\") || imageKey.startsWith(\"data:\"))\n    ) {\n      setImageUrl(imageKey);\n      setIsLoading(false);\n      setError(false); // Make sure no error is shown for blob URLs\n      return;\n    }\n\n    setRetryCount(0); // Reset retry count when imageKey changes\n    loadImage();\n\n    return () => {\n      // Clean up any blob URLs we might have created\n      if (imageUrl && imageUrl.startsWith(\"blob:\")) {\n        try {\n          URL.revokeObjectURL(imageUrl);\n        } catch (e) {\n          console.warn(\"Failed to revoke object URL\", e);\n        }\n      }\n      setImageUrl(\"\"); // Clear the image URL on unmount\n    };\n  }, [imageKey]); // Only depend on imageKey to prevent unnecessary retries\n\n  // Manual retry function that resets the retry count and triggers a new load\n  const retry = () => {\n    setRetryCount(0);\n    loadImage();\n  };\n\n  return {\n    imageUrl: imageUrl || defaultFallbackUrl || \"\",\n    isLoading,\n    error,\n    retry,\n  };\n};\n\n// Utility function for profile images specifically\nexport const useProfileImage = (\n  imageKey: string | undefined,\n  fallbackName: string,\n  retryAttempts: number = 2\n) => {\n  return useS3Image(imageKey, {\n    defaultAvatarName: fallbackName,\n    retryAttempts,\n  });\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/admin/sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport Link from \"next/link\";\nimport clsx from \"clsx\";\nimport {\n  HomeIcon,\n  ShoppingCartIcon,\n  ArrowRightOnRectangleIcon,\n  DocumentTextIcon,\n  UserCircleIcon,\n  Bars3Icon,\n  XMarkIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  Cog6ToothIcon,\n  CommandLineIcon,\n} from \"@heroicons/react/24/outline\";\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { logout } from \"@/lib/store/auth/authSlice\";\nimport { useState, useEffect, Dispatch, SetStateAction } from \"react\";\nimport { LucideClockFading, ShoppingBasket } from \"lucide-react\";\nimport { useAuthData } from \"@/hooks/useAuthData\";\nimport { useProfileImage } from \"@/hooks/useS3Image\";\nimport type { RootState } from \"@/lib/store/store\";\n\nconst menuItems = [\n  { href: \"/admin/dashboard\", label: \"Dashboard\", icon: HomeIcon },\n  {\n    href: \"/admin/user-management\",\n    label: \"User Management\",\n    icon: UserCircleIcon,\n    superadminOnly: true,\n  },\n  { href: \"/admin/orders\", label: \"Pending Orders\", icon: LucideClockFading },\n  { href: \"/admin/all-orders\", label: \"All Orders\", icon: ShoppingBasket },\n  {\n    href: \"/admin/all-products\",\n    label: \"All Products\",\n    icon: ShoppingCartIcon,\n  },\n  {\n    href: \"/admin/provider-request\",\n    label: \"Partners\",\n    icon: DocumentTextIcon,\n  },\n  {\n    href: \"/admin/setting\",\n    label: \"Settings\",\n    icon: Cog6ToothIcon,\n    superadminOnly: true,\n  },\n  {\n    href: \"/admin/system-environment\",\n    label: \"System Environment\",\n    icon: CommandLineIcon,\n    superadminOnly: true,\n  },\n];\n\ninterface SidebarProps {\n  className?: string;\n  collapsed: boolean;\n  setCollapsed: Dispatch<SetStateAction<boolean>>;\n}\n\nexport function Sidebar({\n  className = \"\",\n  collapsed,\n  setCollapsed,\n}: SidebarProps) {\n  const { user } = useSelector((state: RootState) => state.auth);\n  // console.log(\"Get sidebar user:\", user);\n  const pathname = usePathname();\n  const dispatch = useDispatch();\n  const [isHovering, setIsHovering] = useState<string | null>(null);\n  const [isMobile, setIsMobile] = useState(false);\n  const { imageUrl } = useProfileImage(user?.pp, user?.fullName || \"\");\n  const { isSuperadmin } = useAuthData();\n\n  // Handle window resize for responsive behavior\n  useEffect(() => {\n    const handleResize = () => {\n      const isMobileView = window.innerWidth < 768;\n      setIsMobile(isMobileView);\n\n      // Only auto-collapse on initial mobile detection or window resize to mobile\n      if (isMobileView) {\n        setCollapsed(true);\n      }\n    };\n\n    // Set initial state\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [setCollapsed]);\n\n  const handleLogout = async () => {\n    try {\n      await axios.post(\"/api/auth/logout\");\n\n      // Clear all storage locations\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      sessionStorage.removeItem(\"token\");\n      sessionStorage.removeItem(\"user\");\n\n      // Clear cookies on client side\n      document.cookie =\n        \"token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n      document.cookie = \"user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n\n      // Make sure Redux state is cleared\n      dispatch(logout());\n\n      // Force a hard refresh to ensure all state is cleared\n      window.location.href = \"/login\";\n    } catch (error) {\n      console.error(\"Logout error:\", error);\n\n      // Even if the API call fails, still clear local state and redirect\n      dispatch(logout());\n      window.location.href = \"/login\";\n    }\n  };\n\n  return (\n    <>\n      {/* Mobile backdrop */}\n      {isMobile && !collapsed && (\n        <div\n          className=\"fixed inset-0 bg-black/60 z-40 md:hidden\"\n          onClick={() => setCollapsed(true)}\n        />\n      )}\n\n      <aside\n        className={clsx(\n          \"bg-gradient-to-b from-blue-500 to-blue-600 border-r border-divider/30 shadow-lg flex flex-col transition-all duration-300 ease-in-out\",\n          // Fixed height and positioning\n          \"fixed top-0 bottom-0 h-screen\",\n          // Desktop styling\n          !isMobile && \"z-30\",\n          !isMobile && collapsed ? \"w-20\" : !isMobile ? \"w-72\" : \"\",\n          // Mobile positioning\n          isMobile && \"z-50 w-[280px]\",\n          isMobile && collapsed ? \"-translate-x-full\" : \"translate-x-0\",\n          className\n        )}\n      >\n        {/* Desktop toggle button - visible only on desktop */}\n        {!isMobile && (\n          <button\n            onClick={() => setCollapsed(!collapsed)}\n            className=\"absolute right-[-10px] top-[300px] flex items-center justify-center w-5 h-16 bg-cyan-700 text-white rounded-r-lg shadow-xl hover:bg-cyan-800 transition-all z-50 border-2 border-cyan border-l-0\"\n            title={collapsed ? \"Expand sidebar\" : \"Collapse sidebar\"}\n          >\n            {collapsed ? (\n              <ChevronRightIcon className=\"w-5 h-5\" />\n            ) : (\n              <ChevronLeftIcon className=\"w-5 h-5\" />\n            )}\n          </button>\n        )}\n\n        {/* Brand Header */}\n        <div\n          className={clsx(\n            \"border-b border-divider/20 flex items-center\",\n            !isMobile && collapsed ? \"justify-center py-6\" : \"p-6\"\n          )}\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-9 w-9 flex items-center justify-center\">\n              <img\n                src=\"/images/logo-kotak-white.png\"\n                alt=\"APJII Logo\"\n                className=\"w-auto h-10\"\n              />\n            </div>\n            {(!collapsed || isMobile) && (\n              <h2 className=\"text-xl font-bold bg-clip-text text-white\">\n                APJII DC\n              </h2>\n            )}\n          </div>\n        </div>\n\n        {/* User Profile - always show on mobile, hide on collapsed desktop */}\n        {(!collapsed || isMobile) && (\n          <div className=\"p-4 mb-2 mt-2\">\n            <div className=\"flex items-center gap-3 px-4 py-3 rounded-xl bg-blue-600/30\">\n              {imageUrl ? (\n                <img\n                  src={imageUrl}\n                  alt={user?.fullName}\n                  className=\"w-10 h-10 rounded-full object-cover\"\n                />\n              ) : (\n                <UserCircleIcon className=\"w-10 h-10 text-white/90\" />\n              )}\n              <div>\n                <p className=\"font-medium text-white\">{user?.fullName}</p>\n                <p className=\"text-xs text-white/80\">Administrator</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Navigation Header - always show on mobile */}\n        {(!collapsed || isMobile) && (\n          <div className=\"px-4 text-xs font-medium text-white/80 uppercase tracking-wider mt-2\">\n            Main Navigation\n          </div>\n        )}\n        {/* Navigation Items - with proper overflow handling */}\n        <nav\n          className={clsx(\n            \"flex-1 py-2 overflow-y-auto\",\n            !isMobile && collapsed ? \"px-2 space-y-3 mt-4\" : \"px-4 space-y-1\"\n          )}\n        >\n          {menuItems\n            .filter((item) => !item.superadminOnly || isSuperadmin)\n            .map((item) => (\n              <Link\n                key={item.href}\n                href={item.href}\n                onMouseEnter={() => setIsHovering(item.href)}\n                onMouseLeave={() => setIsHovering(null)}\n                title={collapsed && !isMobile ? item.label : undefined}\n                className={clsx(\n                  \"flex items-center gap-3 transition-all duration-200 overflow-hidden relative\",\n                  !isMobile && collapsed ? \"justify-center p-3\" : \"px-4 py-3\",\n                  \"rounded-xl\",\n                  pathname === item.href\n                    ? \"bg-blue-700 text-white font-medium shadow-md\"\n                    : \"hover:bg-blue-600/50 text-white\"\n                )}\n              >\n                {pathname === item.href && (\n                  <span className=\"absolute inset-0 bg-primary/10 rounded-xl\" />\n                )}\n                {item.icon && (\n                  <item.icon\n                    className={clsx(\n                      !isMobile && collapsed ? \"w-6 h-6\" : \"w-5 h-5\",\n                      \"transition-transform\",\n                      (isHovering === item.href || pathname === item.href) &&\n                        \"scale-110\"\n                    )}\n                  />\n                )}\n                {(!collapsed || isMobile) && (\n                  <span className=\"font-medium\">{item.label}</span>\n                )}\n                {(!collapsed || isMobile) && pathname === item.href && (\n                  <span className=\"absolute right-4 h-1.5 w-1.5 rounded-full bg-white\" />\n                )}\n              </Link>\n            ))}\n        </nav>\n\n        {/* Footer Actions - Fixed at bottom */}\n        <div\n          className={clsx(\n            \"sticky bottom-0 left-0 right-0 bg-blue-600 border-t border-blue-700/50 py-2\",\n            !isMobile && collapsed ? \"px-2\" : \"px-4\"\n          )}\n        >\n          {(!collapsed || isMobile) && (\n            <div className=\"px-1 text-xs font-medium text-white/80 uppercase tracking-wider mb-2\">\n              Account\n            </div>\n          )}\n          <button\n            onClick={handleLogout}\n            title={collapsed && !isMobile ? \"Logout\" : undefined}\n            className={clsx(\n              \"bg-red-600 hover:bg-red-700 text-white w-full rounded-xl transition-all duration-200 group shadow-md\",\n              !isMobile && collapsed\n                ? \"flex justify-center p-3\"\n                : \"flex items-center gap-3 px-4 py-3\"\n            )}\n          >\n            <ArrowRightOnRectangleIcon\n              className={clsx(\n                !isMobile && collapsed ? \"w-6 h-6\" : \"w-5 h-5\",\n                \"text-white group-hover:rotate-12 transition-transform\"\n              )}\n            />\n            {(!collapsed || isMobile) && (\n              <span className=\"font-medium\">Logout</span>\n            )}\n          </button>\n        </div>\n      </aside>\n\n      {/* Main content padding for fixed sidebar */}\n      <div\n        className={clsx(\n          \"transition-all duration-300\",\n          !isMobile && collapsed ? \"pl-20\" : !isMobile ? \"pl-72\" : \"pl-0\"\n        )}\n      />\n\n      {/* Mobile Toggle Button - Always visible on mobile */}\n      {isMobile && (\n        <button\n          onClick={() => setCollapsed(!collapsed)}\n          className=\"fixed z-[60] p-3 rounded-full bg-blue-500 text-white shadow-lg md:hidden transition-all duration-300 bottom-4 left-4\"\n          aria-label={collapsed ? \"Open menu\" : \"Close menu\"}\n        >\n          <Bars3Icon className=\"w-6 h-6\" />\n        </button>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useAuthData } from \"@/hooks/useAuthData\";\nimport { useRouter } from \"next/navigation\";\nimport { Sidebar } from \"@/components/admin/sidebar\";\nimport { useEffect, useState, createContext } from \"react\";\nimport { Spinner } from \"@heroui/spinner\";\nimport clsx from \"clsx\";\n\n// Create a context for PPN value\nexport const AdminSettingsContext = createContext<{\n  ppn: number | null;\n  settings: any | null;\n}>({\n  ppn: null,\n  settings: null,\n});\n\nexport default function AdminLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const { user, isAdmin, loading, isSuperadmin, isAdminStaff } = useAuthData();\n  const router = useRouter();\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n  const [settings, setSettings] = useState<any>(null);\n  const [ppn, setPpn] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!loading && !isAdmin) {\n      router.replace(\"/\");\n    }\n  }, [isAdmin, loading, router]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (isSuperadmin) {\n      console.log(\"Superadmin\");\n    }\n    if (isAdminStaff) {\n      console.log(\"Admin staff\");\n    }\n\n    const fetchSettings = async () => {\n      try {\n        const response = await fetch(\"/api/setting\");\n        const data = await response.json();\n        setSettings(data);\n        if (data.status === \"ok\" && data.data.ppn) {\n          setPpn(data.data.ppn);\n          console.log(\"PPN value:\", data.data.ppn); // This will show the ppn value\n        }\n      } catch (error) {\n        console.error(\"Failed to fetch settings:\", error);\n      }\n    };\n\n    if (isAdmin) {\n      fetchSettings();\n    }\n  }, [isAdmin]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Spinner size=\"lg\" />\n      </div>\n    );\n  }\n\n  if (!isAdmin) {\n    return null;\n  }\n  return (\n    <div className=\"flex min-h-screen relative overflow-hidden\">\n      <AdminSettingsContext.Provider value={{ ppn, settings }}>\n        <Sidebar\n          collapsed={sidebarCollapsed}\n          setCollapsed={setSidebarCollapsed}\n        />\n        <main\n          className={clsx(\n            \"flex-1 p-4 md:p-8 transition-all duration-300 ease-in-out overflow-hidden\",\n            isMobile && !sidebarCollapsed ? \"ml-[280px]\" : \"\"\n          )}\n        >\n          <div className=\"max-w-full overflow-hidden\">{children}</div>\n        </main>\n      </AdminSettingsContext.Provider>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAUO,MAAM,qCAAuB,IAAA,sNAAa,EAG9C;IACD,KAAK;IACL,UAAU;AACZ;AAEe,SAAS,YAAY,EAClC,QAAQ,EAGT;IACC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,YAAY,EAAE,YAAY,EAAE,GAAG,IAAA,mIAAW;IAC1E,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAM;IAC9C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,CAAC,SAAS;YACxB,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAS;QAAS;KAAO;IAE7B,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,YAAY,OAAO,UAAU,GAAG;QAClC;QACA;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,IAAI,cAAc;YAChB,QAAQ,GAAG,CAAC;QACd;QACA,IAAI,cAAc;YAChB,QAAQ,GAAG,CAAC;QACd;QAEA,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM;gBAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,YAAY;gBACZ,IAAI,KAAK,MAAM,KAAK,QAAQ,KAAK,IAAI,CAAC,GAAG,EAAE;oBACzC,OAAO,KAAK,IAAI,CAAC,GAAG;oBACpB,QAAQ,GAAG,CAAC,cAAc,KAAK,IAAI,CAAC,GAAG,GAAG,+BAA+B;gBAC3E;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,6BAA6B;YAC7C;QACF;QAEA,IAAI,SAAS;YACX;QACF;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,0NAAO;gBAAC,MAAK;;;;;;;;;;;IAGpB;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IACA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,qBAAqB,QAAQ;YAAC,OAAO;gBAAE;gBAAK;YAAS;;8BACpD,8OAAC,0IAAO;oBACN,WAAW;oBACX,cAAc;;;;;;8BAEhB,8OAAC;oBACC,WAAW,IAAA,gJAAI,EACb,6EACA,YAAY,CAAC,mBAAmB,eAAe;8BAGjD,cAAA,8OAAC;wBAAI,WAAU;kCAA8B;;;;;;;;;;;;;;;;;;;;;;AAKvD","debugId":null}}]
}