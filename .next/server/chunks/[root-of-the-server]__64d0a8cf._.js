module.exports = [
"[project]/.next-internal/server/app/api/wilayah/route/actions.js [app-rsc] (server actions loader, ecmascript)", ((__turbopack_context__, module, exports) => {

}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/http2 [external] (http2, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}),
"[externals]/assert [external] (assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}),
"[externals]/tty [external] (tty, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[project]/app/api/wilayah/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "GET",
    ()=>GET
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$axios$2f$lib$2f$axios$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/axios/lib/axios.js [app-route] (ecmascript)");
;
;
const BASE_URL = "https://sipedas.pertanian.go.id/api/wilayah";
const DEFAULT_YEAR = "2025"; // Using default year 2025 as per example
// Helper function to handle API requests
async function fetchFromSipedas(endpoint, params) {
    try {
        const url = `${BASE_URL}/${endpoint}`;
        const response = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$axios$2f$lib$2f$axios$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].get(url, {
            params
        });
        return response.data;
    } catch (error) {
        console.error(`Error fetching from Sipedas API (${endpoint}):`, error.message);
        throw error;
    }
}
// Transform object response to array format
function objectToArray(data, endpoint, type) {
    if (!data || typeof data !== "object") {
        console.warn("API returned invalid data format:", data);
        return [];
    }
    return Object.entries(data).map(([id, name])=>{
        switch(true){
            case /provinces|list_pro/.test(String(id)):
                return {
                    id_provinsi: id,
                    nama_provinsi: name
                };
            case /regencies|list_kab/.test(String(id)):
                return {
                    id_kabupaten: id,
                    nama_kabupaten: name
                };
            case /districts|list_kec/.test(String(id)):
                return {
                    id_kecamatan: id,
                    nama_kecamatan: name
                };
            case /villages|list_des/.test(String(id)):
                return {
                    id_kelurahan: id,
                    nama_kelurahan: name
                };
            default:
                switch(true){
                    case endpoint === "list_pro" || type === "provinces":
                        return {
                            id_provinsi: id,
                            nama_provinsi: name
                        };
                    case endpoint === "list_kab" || type === "regencies":
                        return {
                            id_kabupaten: id,
                            nama_kabupaten: name
                        };
                    case endpoint === "list_kec" || type === "districts":
                        return {
                            id_kecamatan: id,
                            nama_kecamatan: name
                        };
                    case endpoint === "list_des" || type === "villages":
                        return {
                            id_kelurahan: id,
                            nama_kelurahan: name
                        };
                    default:
                        return {
                            id,
                            name
                        };
                }
        }
    });
}
async function GET(req) {
    const searchParams = req.nextUrl.searchParams;
    const type = searchParams.get("type");
    const year = searchParams.get("year") || DEFAULT_YEAR;
    try {
        let data;
        let endpoint = "";
        switch(type){
            case "provinces":
                endpoint = "list_pro";
                data = await fetchFromSipedas(endpoint, {
                    thn: year
                });
                // Transform object response to array format for provinces
                if (!Array.isArray(data)) {
                    console.log("Converting provinces object to array:", data);
                    // Format: { "11": "ACEH", "12": "SUMATERA UTARA", ... }
                    const transformedData = Object.entries(data).map(([id, name])=>({
                            id_provinsi: id,
                            nama_provinsi: name
                        }));
                    data = transformedData;
                }
                break;
            case "regencies":
                endpoint = "list_kab";
                const provinceCode = searchParams.get("provinceCode");
                if (!provinceCode) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Province code is required"
                    }, {
                        status: 400
                    });
                }
                data = await fetchFromSipedas(endpoint, {
                    thn: year,
                    lvl: "11",
                    pro: provinceCode
                });
                // Transform object response to array format for regencies
                if (!Array.isArray(data)) {
                    console.log("Converting regencies object to array:", data);
                    const transformedData = Object.entries(data).map(([id, name])=>({
                            id_kabupaten: id,
                            nama_kabupaten: name
                        }));
                    data = transformedData;
                }
                break;
            case "districts":
                endpoint = "list_kec";
                const regencyProvinceCode = searchParams.get("provinceCode");
                const regencyCode = searchParams.get("regencyCode");
                if (!regencyProvinceCode || !regencyCode) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Province code and regency code are required"
                    }, {
                        status: 400
                    });
                }
                data = await fetchFromSipedas(endpoint, {
                    thn: year,
                    lvl: "12",
                    pro: regencyProvinceCode,
                    kab: regencyCode
                });
                // Transform object response to array format for districts
                if (!Array.isArray(data)) {
                    console.log("Converting districts object to array:", data);
                    const transformedData = Object.entries(data).map(([id, name])=>({
                            id_kecamatan: id,
                            nama_kecamatan: name
                        }));
                    data = transformedData;
                }
                break;
            case "villages":
                endpoint = "list_des";
                const districtProvinceCode = searchParams.get("provinceCode");
                const districtRegencyCode = searchParams.get("regencyCode");
                const districtCode = searchParams.get("districtCode");
                if (!districtProvinceCode || !districtRegencyCode || !districtCode) {
                    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                        error: "Province, regency and district codes are required"
                    }, {
                        status: 400
                    });
                }
                data = await fetchFromSipedas(endpoint, {
                    thn: year,
                    lvl: "13",
                    pro: districtProvinceCode,
                    kab: districtRegencyCode,
                    kec: districtCode
                });
                // Transform object response to array format for villages
                if (!Array.isArray(data)) {
                    console.log("Converting villages object to array:", data);
                    const transformedData = Object.entries(data).map(([id, name])=>({
                            id_kelurahan: id,
                            nama_kelurahan: name
                        }));
                    data = transformedData;
                }
                break;
            default:
                return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                    error: "Invalid type. Use 'provinces', 'regencies', 'districts', or 'villages'"
                }, {
                    status: 400
                });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(data);
    } catch (error) {
        console.error("API error details:", error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: error.message || "Failed to fetch data"
        }, {
            status: 500
        });
    }
}
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__64d0a8cf._.js.map