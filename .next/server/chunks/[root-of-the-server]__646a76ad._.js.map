{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/setting/user-setting/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport axios from \"axios\";\nimport { cookies } from \"next/headers\";\n\nexport async function POST(req: Request) {\n  try {\n    const cookieStore = await cookies();\n    const token = cookieStore.get(\"token\");\n    const BACKEND_URL = process.env.NEXT_PUBLIC_BACKEND_URL;\n\n    if (!token?.value) {\n      return NextResponse.json(\n        { status: \"error\", message: \"Unauthorized\" },\n        { status: 401 }\n      );\n    }\n\n    // Get form data from request\n    const formData = await req.formData();\n    console.log(\"Form data received:\", Object.fromEntries(formData.entries())); // Debug form data\n\n    // Create a new FormData to pass to the backend\n    const backendFormData = new FormData();\n\n    // Get username from form data\n    const username = formData.get(\"username\");\n    if (username) {\n      backendFormData.append(\"username\", username.toString());\n    }\n\n    // Get fullName from form data\n    const fullName = formData.get(\"fullName\");\n    if (fullName) {\n      backendFormData.append(\"fullName\", fullName.toString());\n    }\n\n    // Get phone from form data\n    const phone = formData.get(\"phone\");\n    if (phone) {\n      backendFormData.append(\"phone\", phone.toString());\n    }\n\n    // Get profile picture from form data\n    const profilePicture = formData.get(\"pp\");\n    if (profilePicture && profilePicture instanceof File) {\n      backendFormData.append(\"pp\", profilePicture);\n    }\n\n    // Send request to backend\n    const response = await axios.post(\n      `${BACKEND_URL}/my/update`,\n      backendFormData,\n      {\n        headers: {\n          Authorization: token.value.startsWith(\"Bearer \")\n            ? token.value\n            : `Bearer ${token.value}`,\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      }\n    );\n\n    console.log(\"Backend response:\", response.data); // Debug backend response\n    return NextResponse.json(response.data);\n  } catch (error: any) {\n    console.error(\"User setting update error:\", {\n      message: error.message,\n      response: error.response?.data,\n    });\n\n    return NextResponse.json(\n      {\n        status: \"error\",\n        message:\n          error.response?.data?.message || \"Failed to update user settings\",\n      },\n      { status: error.response?.status || 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,4IAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC;QAC9B,MAAM;QAEN,IAAI,CAAC,OAAO,OAAO;YACjB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,QAAQ;gBAAS,SAAS;YAAe,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,6BAA6B;QAC7B,MAAM,WAAW,MAAM,IAAI,QAAQ;QACnC,QAAQ,GAAG,CAAC,uBAAuB,OAAO,WAAW,CAAC,SAAS,OAAO,MAAM,kBAAkB;QAE9F,+CAA+C;QAC/C,MAAM,kBAAkB,IAAI;QAE5B,8BAA8B;QAC9B,MAAM,WAAW,SAAS,GAAG,CAAC;QAC9B,IAAI,UAAU;YACZ,gBAAgB,MAAM,CAAC,YAAY,SAAS,QAAQ;QACtD;QAEA,8BAA8B;QAC9B,MAAM,WAAW,SAAS,GAAG,CAAC;QAC9B,IAAI,UAAU;YACZ,gBAAgB,MAAM,CAAC,YAAY,SAAS,QAAQ;QACtD;QAEA,2BAA2B;QAC3B,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,IAAI,OAAO;YACT,gBAAgB,MAAM,CAAC,SAAS,MAAM,QAAQ;QAChD;QAEA,qCAAqC;QACrC,MAAM,iBAAiB,SAAS,GAAG,CAAC;QACpC,IAAI,kBAAkB,0BAA0B,MAAM;YACpD,gBAAgB,MAAM,CAAC,MAAM;QAC/B;QAEA,0BAA0B;QAC1B,MAAM,WAAW,MAAM,kJAAK,CAAC,IAAI,CAC/B,GAAG,YAAY,UAAU,CAAC,EAC1B,iBACA;YACE,SAAS;gBACP,eAAe,MAAM,KAAK,CAAC,UAAU,CAAC,aAClC,MAAM,KAAK,GACX,CAAC,OAAO,EAAE,MAAM,KAAK,EAAE;gBAC3B,gBAAgB;YAClB;QACF;QAGF,QAAQ,GAAG,CAAC,qBAAqB,SAAS,IAAI,GAAG,yBAAyB;QAC1E,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS,IAAI;IACxC,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8BAA8B;YAC1C,SAAS,MAAM,OAAO;YACtB,UAAU,MAAM,QAAQ,EAAE;QAC5B;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,QAAQ;YACR,SACE,MAAM,QAAQ,EAAE,MAAM,WAAW;QACrC,GACA;YAAE,QAAQ,MAAM,QAAQ,EAAE,UAAU;QAAI;IAE5C;AACF","debugId":null}}]
}